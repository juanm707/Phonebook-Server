(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(42)},23:function(e,n,t){},24:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(17),r=t.n(c),u=(t(23),t(7)),l=t(3),i=t(2),s=(t(24),t(5)),m=t.n(s),f="/api/persons",d=function(){return m.a.get(f).then((function(e){return e.data}))},b=function(e){return m.a.post(f,e).then((function(e){return console.log(e.data),e.data}))},h=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.filter,t=e.onChange;return o.a.createElement("div",null,o.a.createElement("p",null,"filter shown with"),o.a.createElement("input",{value:n,onChange:t}))},g=function(e){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.newName,onChange:e.onNameChange}),o.a.createElement("br",null),"number: ",o.a.createElement("input",{value:e.newNumber,onChange:e.onNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},E=function(e){return console.log(e.personsToDisplay),o.a.createElement("div",null,e.personsToDisplay.map((function(n){return console.log("In Persons",n),o.a.createElement("div",{key:n.id},o.a.createElement("p",{key:n.name},n.name," ",n.number," ",o.a.createElement("button",{onClick:function(){return e.onDelete(n)}},"delete")))})))},w=function(e){var n=e.message,t=e.styleT;return null===n?null:o.a.createElement("div",{style:{marginTop:"10px"},className:t?"error":"success"},n)},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),m=s[0],f=s[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),y=O[0],C=O[1],k=Object(a.useState)(""),S=Object(i.a)(k,2),N=S[0],T=S[1],D=Object(a.useState)(Object(l.a)(t)),x=Object(i.a)(D,2),I=x[0],P=x[1],B=Object(a.useState)(null),J=Object(i.a)(B,2),U=J[0],W=J[1],A=Object(a.useState)(!1),L=Object(i.a)(A,2),M=L[0],$=L[1];Object(a.useEffect)((function(){d().then((function(e){c(e),P(e)}))}),[]);return o.a.createElement("div",{style:{paddingLeft:"10px"}},o.a.createElement(w,{message:U,styleT:M}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(v,{filter:N,onChange:function(e){T(e.target.value),""===e.target.value?P(Object(l.a)(t)):P(t.filter((function(n){return n.name.toUpperCase().includes(e.target.value.toUpperCase())})))}}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(g,{onSubmit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===m}));if(n.length>0){if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var a=Object(u.a)(Object(u.a)({},n[0]),{},{number:y});h(a.id,a).then((function(e){var n=t.map((function(n){return n.id!==e.id?n:e}));c(n),P(Object(l.a)(n)),f(""),C(""),T(""),W("".concat(e.name," was successfully updated")),$(!1),setTimeout((function(){W(null)}),5e3)})).catch((function(e){W("Information for ".concat(m," has already been removed from the server")),$(!0),setTimeout((function(){W(null)}),5e3);var n=t.filter((function(e){return e.id!==a.id}));c(n),P(Object(l.a)(n))}))}}else b({name:m,number:y}).then((function(e){c(t.concat(e)),P(t.concat(e)),f(""),C(""),T(""),W("".concat(e.name," was successfully added")),$(!1),setTimeout((function(){W(null)}),5e3)}))},newName:m,newNumber:y,onNameChange:function(e){f(e.target.value)},onNumberChange:function(e){C(e.target.value)}}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(E,{personsToDisplay:I,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then((function(){var n=t.filter((function(n){return n.id!==e.id}));console.log("newPersons",n),c(n),P(Object(l.a)(n)),W("".concat(e.name," was successfully deleted")),$(!1),setTimeout((function(){W(null)}),5e3)})).catch((function(e){return alert(e)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.a1bbd1ab.chunk.js.map